# =============================================================================
# PROXMOX PROVIDER ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and fill in your actual values
# The direnv plugin will automatically load these variables
#
# SECURITY NOTES:
# - Never commit .env file to git (already in .gitignore)
# - Use API tokens instead of user/password for production
# - Rotate credentials regularly
# =============================================================================

# ---------------------------------------------------------------------------
# Proxmox API Configuration
# ---------------------------------------------------------------------------
# Format: https://<proxmox-host>:<port>/api2/json
# Default port is 8006
# ---------------------------------------------------------------------------
PM_API_URL=https://proxmox.example.com:8006/api2/json

# =============================================================================
# AUTHENTICATION METHOD (Choose ONE)
# =============================================================================
# Option 1: API Token (RECOMMENDED - More secure, fine-grained permissions)
# Option 2: User/Password (Fallback - Simpler setup, less secure)
#
# Uncomment ONLY ONE authentication method below
# =============================================================================

# ---------------------------------------------------------------------------
# OPTION 1: API Token Authentication (RECOMMENDED)
# ---------------------------------------------------------------------------
# Create token in Proxmox UI:
# Datacenter > Permissions > API Tokens > Add
#
# Important:
# - Uncheck "Privilege Separation" for simpler setup
# - OR grant specific permissions to token if using Privilege Separation
#
# Format: <user>@<realm>!<token-name>
# Example: terraform@pam!terraform-token
# ---------------------------------------------------------------------------
PM_API_TOKEN_ID=terraform@pam!terraform-token
PM_API_TOKEN_SECRET=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# ---------------------------------------------------------------------------
# OPTION 2: User/Password Authentication (FALLBACK)
# ---------------------------------------------------------------------------
# Use this if you have issues with API tokens or for quick testing
# NOT RECOMMENDED for production - tokens are more secure
#
# Format: <user>@<realm>
# Examples: root@pam, terraform@pve
# ---------------------------------------------------------------------------
# PM_USER=root@pam
# PM_PASS=your-password-here

# =============================================================================
# COMMON CONFIGURATION
# =============================================================================

# ---------------------------------------------------------------------------
# TLS Verification
# ---------------------------------------------------------------------------
# Set to true to disable TLS verification (self-signed certificates)
# Set to false in production with valid SSL certificates
# Default: false (TLS verification enabled)
# ---------------------------------------------------------------------------
PM_TLS_INSECURE=true

# ---------------------------------------------------------------------------
# Optional: Proxmox Debugging
# ---------------------------------------------------------------------------
# Uncomment to enable debug logging
# PM_LOG_ENABLE=true
# PM_LOG_FILE=terraform-provider-proxmox.log
# PM_LOG_LEVELS_http=debug
# PM_LOG_LEVELS_proxmox=debug

# =============================================================================
# AUTHENTICATION TROUBLESHOOTING
# =============================================================================
#
# API Token Issues:
# - Error "privilege separation": Disable it OR grant permissions to token
# - Error "permissions not sufficient": Grant PVEAdmin or Administrator role
# - Commands to fix:
#   pveum aclmod / -user terraform@pam -role Administrator
#   pveum user token add terraform@pam terraform-token --privsep 0
#
# User/Password Issues:
# - Ensure user has Administrator or PVEAdmin role
# - Check realm is correct (@pam, @pve)
#
# =============================================================================
